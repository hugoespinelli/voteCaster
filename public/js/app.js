"use strict";var app=angular.module("app",["ngRoute"]);app.component("pollResult",{templateUrl:"../templates/pollResult.html",bindings:{poll:"="}}),app.config(["$routeProvider","$locationProvider",function(t,l){t.when("/",{templateUrl:"result/result.html",controller:"ResultCtrl"}).when("/url/:url",{templateUrl:"poll/poll.html",controller:"PollCtrl"}).when("/create",{templateUrl:"create/create.html",controller:"CreateCtrl"}),l.hashPrefix("")}]),app.controller("CreateCtrl",["$location","$http",function(e,l){var c=this;function o(){if(c.title&&""!=c.title){var t={title:c.title,choices:c.choices.filter(function(t){return t.name})};return t}}c.choices=[{}],c.created=!1,c.addChoice=function(t){t.name&&(c.choices.push({}),console.log(c.choices))},c.removeChoice=function(t){1!==c.choices.length&&c.choices.splice(t,1)},c.save=function(){var t=o();l.post("http://localhost:3000/api/poll/",t).then(function(t){c.created=!0;var l,o=t.data;c.url=(l=o.url,e.host()+":"+e.port()+"/#/url/"+l),c.key=o.key}).catch(function(t){return console.log(t)})},console.log("Create Ctrl IS FUCKING WORKING")}]),app.controller("PollCtrl",["$location","$http",function(l,o){var c=this;c.voted=!1,c.getUrl=function(){return l.path().substr(4)},c.getPoll=function(t){o.get("http://localhost:3000/api/poll/"+t).then(function(t){var l=t.data,o=l.title,e=l.choices;c.title=o,c.choices=e}).catch(function(t){l.path("/")})},c.vote=function(t){if(t){var l=t.id_choice;o.put("http://localhost:3000/api/choice/"+l).then(function(t){c.voted=!0}).catch(function(t){console.log(t)})}},c.getPoll(c.getUrl()),console.log("Poll Controler is FCKING WORKING!!")}]),app.controller("ResultCtrl",["$http",function(l){var o=this;o.getResult=function(t){l.get("http://localhost:3000/api/poll/key/"+t).then(function(t){console.log(t),o.poll=t.data}).catch(function(t){console.log(t)})},console.log("Result Ctrl is FUCKING WORKING")}]);